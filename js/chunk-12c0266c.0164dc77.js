(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12c0266c"],{"0a26":function(e,a,t){"use strict";t.r(a);var l=t("7a23"),c={class:"row mt-5"},i={class:"col-sm-12"},o={class:"card shadow"},n=Object(l["i"])("header",{class:"card-header"},[Object(l["i"])("strong",{class:"align-self-center"}," Crie tarefas ")],-1),r={class:"card-body"},s={class:"row"},u={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-3"},d={class:"row"},b={class:"col-sm-6 col-md-6 col-lg-6 col-xl-6"},v={key:0},m={class:"col-sm-6 col-md-6 col-lg-6 col-xl-6"},j={key:0},O=Object(l["i"])("label",null," Campos com * são de preenchimento obrigatório ",-1),f={class:"row"},g={class:"col-sm-2 col-md-2 col-lg-2 col-xl-2"},p=Object(l["i"])("label",null,"Referência ",-1),h={class:"col-sm-10 col-md-5 col-lg-5 col-xl-5"},x=Object(l["i"])("label",null,"* Atribuída para:",-1),w={class:"col-sm-12 col-md-5 col-lg-5 col-xl-5"},y=Object(l["i"])("label",null,"* Cliente",-1),C={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},M=Object(l["i"])("label",null,"* Descrição ",-1),V={class:"col-sm-12 col-md-6 col-lg-6 col-xl-6"},U=Object(l["i"])("label",null,"Deadline",-1),k={class:"col-sm-12 col-md-6 col-lg-6 col-xl-6"},A=Object(l["i"])("label",null," Tarefa concluida? ",-1),D=Object(l["i"])("br",null,null,-1),P={class:"d-flex mt-3 buttonsActions"},B={key:0,class:"btn btn-success",type:"submit"},R=Object(l["i"])("br",null,null,-1),S=Object(l["i"])("br",null,null,-1),E=Object(l["i"])("br",null,null,-1),F={key:0,class:"card shadow mt-3"},J=Object(l["i"])("header",{class:"card-header"},[Object(l["i"])("strong",{class:"align-self-center"}," Chat da taféra")],-1),G={class:"card-body"},q=Object(l["i"])("p",{class:"text-center"},[Object(l["h"])(" mensagens mais recentes "),Object(l["i"])("i",{class:"fas fa-arrow-up"})],-1),I={class:"row"},T={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 chat"},N={class:"row"},z={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},H={key:0,class:"d-flex justify-content-end"},L={class:"container containerChat col-10"},Y={class:"d-flex justify-content-end mb-1"},$={class:"time-right mr-3"},K=Object(l["i"])("i",{class:"fas fa-arrow-up"},null,-1),Q={class:"d-flex justify-content-end"},W={class:"time-right"},X={key:1,class:"container containerChat darker col-10"},Z={class:"d-flex justify-content-start mb-1"},_=Object(l["i"])("i",{class:"fas fa-arrow-down mr-3"},null,-1),ee={class:"time-left"},ae={class:"time-left"},te={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},le={class:"row"},ce={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},ie={class:"input-group mb-3"},oe={class:"input-group-append"};function ne(e,a,t,ne,re,se){var ue=Object(l["A"])("Multiselect");return Object(l["s"])(),Object(l["e"])("form",{onSubmit:a[11]||(a[11]=function(){return ne.validarForm&&ne.validarForm.apply(ne,arguments)})},[Object(l["i"])("div",c,[Object(l["i"])("div",i,[Object(l["i"])("div",o,[n,Object(l["i"])("div",r,[Object(l["i"])("div",s,[Object(l["i"])("div",u,[Object(l["i"])("div",d,[Object(l["i"])("div",b,[ne.tarefaId?(Object(l["s"])(),Object(l["e"])("label",v," Data de criação "+Object(l["C"])(ne.ViewModel.dataCriacao),1)):Object(l["f"])("",!0)]),Object(l["i"])("div",m,[ne.tarefaId?(Object(l["s"])(),Object(l["e"])("label",j," Data ultima alteração "+Object(l["C"])(ne.ViewModel.dataUltimaAlteracao),1)):Object(l["f"])("",!0)])]),O,Object(l["i"])("div",f,[Object(l["i"])("div",g,[p,Object(l["J"])(Object(l["i"])("input",{class:"form-control",type:"numbers",placeholder:"Digite um valor","onUpdate:modelValue":a[1]||(a[1]=function(e){return ne.ViewModel.value=e}),readonly:""},null,512),[[l["G"],ne.ViewModel.value]])]),Object(l["i"])("div",h,[x,Object(l["i"])(ue,{modelValue:ne.ViewModel.atribuidaPara,"onUpdate:modelValue":a[2]||(a[2]=function(e){return ne.ViewModel.atribuidaPara=e}),placeholder:"Selecione o usuário",options:ne.optionsUsuarios,disabled:ne.inputReadonly,required:!0},null,8,["modelValue","options","disabled"])]),Object(l["i"])("div",w,[y,Object(l["J"])(Object(l["i"])("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=function(e){return ne.ViewModel.cliente=e}),placeholder:"Digite o nome do cliente",required:"",disabled:ne.inputReadonly},null,8,["disabled"]),[[l["G"],ne.ViewModel.cliente]])]),Object(l["i"])("div",C,[M,Object(l["J"])(Object(l["i"])("textarea",{class:"form-control","onUpdate:modelValue":a[4]||(a[4]=function(e){return ne.ViewModel.descricao=e}),readonly:ne.inputReadonly,placeholder:"Digite a decrição",required:"",rows:"5"},null,8,["readonly"]),[[l["G"],ne.ViewModel.descricao]])]),Object(l["i"])("div",V,[U,Object(l["J"])(Object(l["i"])("input",{type:"date",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=function(e){return ne.ViewModel.deadline=e}),readonly:ne.inputReadonly,required:""},null,8,["readonly"]),[[l["G"],ne.ViewModel.deadline]])]),Object(l["i"])("div",k,[A,D,Object(l["J"])(Object(l["i"])("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=function(e){return ne.ViewModel.concluida=e}),readonly:ne.inputReadonly},null,8,["readonly"]),[[l["F"],ne.ViewModel.concluida]])])]),Object(l["i"])("div",P,[ne.mostrarBtnSalvar?(Object(l["s"])(),Object(l["e"])("button",B," Salvar ")):Object(l["f"])("",!0),ne.mostrarBtnSalvar?(Object(l["s"])(),Object(l["e"])("input",{key:1,type:"button",class:"btn btn-warning ml-2 mr-2",onClick:a[7]||(a[7]=function(e){return ne.limpaForm()}),value:"Limpar"})):Object(l["f"])("",!0),Object(l["i"])("button",{class:"btn btn-secondary",type:"reset",onClick:a[8]||(a[8]=function(a){return e.$router.push("/tarefas")})}," Voltar ")])]),R,S,E])])]),ne.tarefaId?(Object(l["s"])(),Object(l["e"])("div",F,[J,Object(l["i"])("div",G,[q,Object(l["i"])("div",I,[Object(l["i"])("div",T,[Object(l["i"])("div",N,[Object(l["i"])("div",z,[(Object(l["s"])(!0),Object(l["e"])(l["a"],null,Object(l["y"])(ne.chatMensage,(function(e,a){return Object(l["s"])(),Object(l["e"])("div",{key:a},[1==e.mensagemEnvida?(Object(l["s"])(),Object(l["e"])("div",H,[Object(l["i"])("div",L,[Object(l["i"])("div",Y,[Object(l["i"])("span",$,Object(l["C"])(e.user),1),K]),Object(l["i"])("div",Q,[Object(l["i"])("p",null,Object(l["C"])(e.mensagem),1)]),Object(l["i"])("span",W,Object(l["C"])(e.data),1)])])):Object(l["f"])("",!0),0==e.mensagemEnvida?(Object(l["s"])(),Object(l["e"])("div",X,[Object(l["i"])("div",Z,[_,Object(l["i"])("span",ee,Object(l["C"])(e.user),1)]),Object(l["i"])("p",null,Object(l["C"])(e.mensagem),1),Object(l["i"])("span",ae,Object(l["C"])(e.data),1)])):Object(l["f"])("",!0)])})),128))])])]),Object(l["i"])("div",te,[Object(l["i"])("div",le,[Object(l["i"])("div",ce,[Object(l["i"])("div",ie,[Object(l["J"])(Object(l["i"])("textarea",{"onUpdate:modelValue":a[9]||(a[9]=function(e){return ne.mensagemChat=e}),rows:"4",class:"form-control",placeholder:"Digite uma mensagem"},null,512),[[l["G"],ne.mensagemChat]]),Object(l["i"])("div",oe,[Object(l["i"])("input",{type:"button",onClick:a[10]||(a[10]=function(){return ne.enviaMensagemChat&&ne.enviaMensagemChat.apply(ne,arguments)}),class:"input-group-text",value:"Enviar"})])])])])])])])])):Object(l["f"])("",!0)])])],32)}var re=t("1da1"),se=t("3835"),ue=(t("96cf"),t("d3b7"),t("25f0"),t("4fad"),t("a306")),de=t("11c1"),be=t("3d20"),ve=t.n(be),me=t("6c02"),je=t("5502"),Oe=t("4f7a"),fe=t("2591"),ge={components:{Multiselect:ue["a"]},setup:function(){var e,a,t=Object(me["d"])(),c=t.params,i=c.tarefaId,o=c.visualizar,n=Object(je["b"])(),r=function(){return i||n.state.emptyGuid},s=Math.floor(Date.now()*Math.random()).toString(36),u=Object(l["x"])(),d=Object(me["e"])(),b=Object(l["x"])([]);o?(e=!1,a=!0):(e=!0,a=!1);var v=Object(l["x"])({id:Object(l["x"])(r),value:Object(l["x"])(s),atribuidaPara:Object(l["x"])(),lablAtribuidaPara:Object(l["x"])(),descricao:Object(l["x"])(),idBanco:Object(l["x"])(),concluida:Object(l["x"])(!1),deadline:Object(l["x"])(),chat:Object(l["x"])([]),cliente:Object(l["x"])("")}),m=Object(l["x"])(),j=Object(l["x"])(),O=function(){v.value.id=Object(l["x"])(),v.value.value=v.value.value+1,v.value.descricao=Object(l["x"])(),v.value.atribuidaPara=Object(l["x"])(),v.value.concluida=Object(l["x"])(!1),v.value.deadline=Object(l["x"])(),v.value.dataCriacao=Object(l["x"])(),v.value.dataUltimaAlteracao=Object(l["x"])()},f=function(e){e.preventDefault(),v.value.atribuidaPara?g():ve.a.fire({icon:"warning",title:"Atenção",text:"Campos com * são de preenchimento obrigatório"})},g=function(){var e=new Date,a=e.getDate(),t=e.getMonth(),l=e.getFullYear(),c=e.getHours(),o=e.getMinutes();if(i){var n={id:v.value.id,atribuidaPara:v.value.atribuidaPara,lablAtribuidaPara:p(),descricao:v.value.descricao,concluida:v.value.concluida,dataUltimaAlteracao:a+"/"+t+"/"+l+":"+c+":"+o,cliente:v.value.cliente},r="tarefa/"+v.value.idBanco;Oe["a"].edit(r,n).then((function(){ve.a.fire({icon:"success",title:"Concluído",text:'O item "'.concat(v.value.value,'" foi editado '),showDenyButton:!0,confirmButtonText:"Voltar",showCancelButton:!0}).then((function(e){e.isConfirmed&&d.push("/tarefas")}))})).catch((function(e){console.error(e)}))}else{v.value.id=Object(de["v4"])();var s={id:v.value.id,value:v.value.value,atribuidaPara:v.value.atribuidaPara,lablAtribuidaPara:p(),descricao:v.value.descricao,concluida:v.value.concluida,deadline:v.value.deadline,dataCriacao:a+"/"+t+"/"+l+":"+c+":"+o,dataUltimaAlteracao:a+"/"+t+"/"+l+":"+c+":"+o,cliente:v.value.cliente};console.log("data",s),Oe["a"].add("tarefa",s).then((function(){ve.a.fire({icon:"success",title:"Concluído",text:'O item "'.concat(v.value.value,'" foi adicionado '),showDenyButton:!0,confirmButtonText:"Voltar",denyButtonText:"Adicionar mais taréfas"}).then((function(e){e.isConfirmed?d.push("/tarefas"):e.isDenied&&O()}))})).catch((function(e){console.error(e)}))}},p=function(){for(var e="",a=0,t=Object.entries(u.value);a<t.length;a++){var l=Object(se["a"])(t[a],2),c=l[0],i=l[1];console.log("#########",c,i),i.id==v.value.atribuidaPara&&(console.log("label is"),e=i.nome)}return e},h=function e(){var a=0,t="tarefa/"+v.value.idBanco,l=[];Oe["a"].get(t).then((function(t){if(console.log("snapshot",t.val()),t.exists()){var c=t.val(),i="",o=fe["a"].auth();o&&(i=o.currentUser.email);for(var n=0,r=Object.entries(c.chat);n<r.length;n++){var s=Object(se["a"])(r[n],2),u=s[0],d=s[1];console.log(d,u);var b=void 0;b=i==d.user?{mensagem:d.mensagem,user:d.user,mensagemEnvida:!0,data:d.data}:{mensagem:d.mensagem,user:d.user,mensagemEnvida:!1,data:d.data},l.push(b)}l.reverse(),j.value=l,console.log("chats",l)}else a++,a<=2&&setTimeout((function(){e()}),1e3),console.log("No data available")})).catch((function(e){console.error(e)}))},x=function(){if(m.value){var e="",a=fe["a"].auth();a&&(e=a.currentUser.email),console.log("mensagemChat",m.value),console.log("userName",e);var t=new Date,l=t.getDate(),c=t.getMonth(),i=t.getFullYear(),o=t.getHours(),n=t.getMinutes(),r={mensagem:m.value,user:e,data:l+"/"+c+"/"+i+" :"+o+":"+n},s="tarefa/"+v.value.idBanco+"/chat";Oe["a"].add(s,r).then((function(){console.log("atualizar o chat"),h(),m.value=""})).catch((function(e){console.error(e)}))}};return Object(l["q"])(Object(re["a"])(regeneratorRuntime.mark((function e(){var a,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=function(){Oe["a"].get("usuarios").then((function(e){if(e.exists()){var a=e.val();console.log("data",a),u.value=a;for(var t=0,l=Object.entries(a);t<l.length;t++){var c=Object(se["a"])(l[t],2),i=c[0],o=c[1];console.log(i,o);var n={value:o.id,label:o.nome};b.value.push(n)}}}))},a(),t=function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("id",a),Oe["a"].get("tarefa").then((function(e){if(e.exists())for(var t=e.val(),l=0,c=Object.entries(t);l<c.length;l++){var i=Object(se["a"])(c[l],2),o=i[0],n=i[1];a==n.id&&(v.value.id=n.id,v.value.atribuidaPara=n.atribuidaPara,v.value.cliente=n.cliente,v.value.descricao=n.descricao,v.value.value=n.value,v.value.idBanco=o,v.value.concluida=n.concluida,v.value.deadline=n.deadline,v.value.dataCriacao=n.dataCriacao,v.value.dataUltimaAlteracao=n.dataUltimaAlteracao,v.value.dataUltimaAlteracao=n.dataUltimaAlteracao)}else console.log("No data available")})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();try{void 0!==i&&(t(i),console.log("obterChat"),h())}catch(l){console.error("Erro ao obter usuario para edição",l)}case 4:case"end":return e.stop()}}),e)})))),{ViewModel:v,optionsUsuarios:b,limpaForm:O,validarForm:f,filtraLabelUsuario:p,mostrarBtnSalvar:e,inputReadonly:a,tarefaId:i,enviaMensagemChat:x,mensagemChat:m,obterChat:h,chatMensage:j}}};t("d742"),t("d7db");ge.render=ne;a["default"]=ge},"25f0":function(e,a,t){"use strict";var l=t("6eeb"),c=t("825a"),i=t("d039"),o=t("ad6d"),n="toString",r=RegExp.prototype,s=r[n],u=i((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),d=s.name!=n;(u||d)&&l(RegExp.prototype,n,(function(){var e=c(this),a=String(e.source),t=e.flags,l=String(void 0===t&&e instanceof RegExp&&!("flags"in r)?o.call(e):t);return"/"+a+"/"+l}),{unsafe:!0})},9444:function(e,a,t){},ad6d:function(e,a,t){"use strict";var l=t("825a");e.exports=function(){var e=l(this),a="";return e.global&&(a+="g"),e.ignoreCase&&(a+="i"),e.multiline&&(a+="m"),e.dotAll&&(a+="s"),e.unicode&&(a+="u"),e.sticky&&(a+="y"),a}},d7db:function(e,a,t){"use strict";t("9444")}}]);
//# sourceMappingURL=chunk-12c0266c.0164dc77.js.map