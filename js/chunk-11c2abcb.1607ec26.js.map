{"version":3,"sources":["webpack:///./src/views/usuarios/Usuarios.vue","webpack:///./src/views/usuarios/Usuarios.vue?df99","webpack:///./src/components/Table/Table.vue","webpack:///./src/components/Table/Table.vue?aaf5"],"names":["class","title","data-edit","to","default","headerColumns","hColumns","items","componentePaginacao","pathPaginaAtual","action","onEdit","table-header-actions","table-actions","fallback","setup","router","itemSelected","key","label","e","target","dataset","edit","console","log","item","id","descricaoItemSelected","nome","fire","icon","confirmButtonText","text","push","usuarios","get","then","snapshot","exists","data","val","Object","entries","value","obj","descricao","catch","error","components","Table","render","index","scope","lAction","rowObj","getColumns","rowValue","data-item","onActionClick","$event","props","emit","lItems","columnsValues","length"],"mappings":"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","file":"js/chunk-11c2abcb.1607ec26.js","sourcesContent":["<template>\r\n  <div class=\"d-flex flex-column col-11 m-auto\">\r\n    <div class=\"col-2\">\r\n      <router-link\r\n        title=\"Adicionar novo usuário\"\r\n        class=\"ml-auto m-1 btn btn-sm btn-primary\"\r\n        to=\"/usuario/novo\"\r\n        >Adicionar</router-link\r\n      >\r\n    </div>\r\n    <div class=\"card shadow\">\r\n      <div class=\"card-header\">Usuário</div>\r\n      <div class=\"card-body\">\r\n        <Suspense>\r\n          <template #default>\r\n            <Table\r\n              class=\"table-borderless table-striped\"\r\n              :headerColumns=\"hColumns\"\r\n              :items=\"items\"\r\n              :componentePaginacao=\"componentePaginacao\"\r\n              pathPaginaAtual=\"cargo\"\r\n              action=\"true\"\r\n              @on-action-click=\"onEdit\"\r\n            >\r\n              <template v-slot:table-header-actions>\r\n                <div\r\n                  class=\"\r\n                    d-flex\r\n                    flex-center\r\n                    justify-content-center\r\n                    align-items-center\r\n                  \"\r\n                >\r\n                  Ações\r\n                </div>\r\n              </template>\r\n              <template v-slot:table-actions>\r\n                <div\r\n                  class=\"\r\n                    d-flex\r\n                    flex-center\r\n                    justify-content-center\r\n                    align-items-center\r\n                  \"\r\n                >\r\n                  <!-- <button\r\n                    data-edit=\"2\"\r\n                    class=\"btn btn-sm btn-primary\"\r\n                    title=\"Visualizar\"\r\n                  >\r\n                    <i data-edit=\"2\" class=\"fas fa-eye\"></i>\r\n                  </button> -->\r\n                  <button\r\n                    title=\"Editar\"\r\n                    data-edit=\"1\"\r\n                    class=\"btn btn-sm btn-warning\"\r\n                  >\r\n                    <i data-edit=\"1\" class=\"fas fa-edit\"></i>\r\n                  </button>\r\n                  <button\r\n                    title=\"Excluir\"\r\n                    data-edit=\"0\"\r\n                    class=\"btn btn-sm btn-danger\"\r\n                  >\r\n                    <i data-edit=\"0\" class=\"fas fa-trash-alt\"></i>\r\n                  </button>\r\n                </div>\r\n              </template>\r\n            </Table>\r\n          </template>\r\n          <template #fallback> caregando tabela </template>\r\n        </Suspense>\r\n      </div>\r\n    </div>\r\n    <!-- <div v-for=\"usuario in items\" :key=\"usuario.id\">\r\n      {{ usuario }} aasd\r\n\r\n    </div> -->\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport Table from \"../../components/Table/Table.vue\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nimport servico from \"../../requisicoes/servicos/usuarios/index\";\r\nexport default {\r\n  setup() {\r\n    let router = useRouter();\r\n    let items = ref(null);\r\n    let itemSelected = ref(null);\r\n    let componentePaginacao = ref(null);\r\n   \r\n    let hColumns = ref([\r\n      {\r\n        key: \"nome\",\r\n        label: \"Nome\",\r\n      },\r\n      {\r\n        key: \"descricao\",\r\n        label: \"Descrição\",\r\n      },\r\n    ]);\r\n\r\n    const onEdit = (e) => {\r\n      if (!e || !e.target || !e.target.dataset) {\r\n        console.log(\"Objeto Errado\");\r\n        return;\r\n      }\r\n      if (e.target.dataset.edit == 1) {\r\n        console.log(\"Editar\", e.item.id);\r\n        // router.push(\"/usuario/editar/\" + e.item.id);\r\n         let descricaoItemSelected = e.item.nome;\r\n         Swal.fire({\r\n          icon: \"question\",\r\n          title: `Você não tem permição para editar`,\r\n          confirmButtonText: `Ok`,\r\n          text: `O item \"${descricaoItemSelected}\"?`,\r\n          // showCancelButton: true,\r\n          // cancelButtonText: `Cancelar`,\r\n        })\r\n      }\r\n      if (e.target.dataset.edit == 2) {\r\n        router.push(\"/usuario/visualizar/\" + e.item.id + \"/visualizar\");\r\n      }\r\n      if (e.target.dataset.edit == 0) {\r\n        console.log(\"itemSelected\", itemSelected)\r\n        let descricaoItemSelected = e.item.nome;\r\n         Swal.fire({\r\n          icon: \"question\",\r\n          title: `Você não tem permição para excluir`,\r\n          confirmButtonText: `Ok`,\r\n          text: `O item \"${descricaoItemSelected}\"?`,\r\n          // showCancelButton: true,\r\n          // cancelButtonText: `Cancelar`,\r\n        })\r\n        // itemSelected = e.item.id;\r\n        // let registroTarefa = false;\r\n        // let descricaoItemSelected = e.item.nome;\r\n        // Swal.fire({\r\n        //   icon: \"question\",\r\n        //   title: `Deseja excluir`,\r\n        //   confirmButtonText: `Sim`,\r\n        //   text: `O item \"${descricaoItemSelected}\"?`,\r\n        //   showCancelButton: true,\r\n        //   cancelButtonText: `Cancelar`,\r\n        // }).then((response) => {\r\n        //   if (response.isConfirmed) {\r\n        //     let itemExcluzao = itemSelected;\r\n        //     let dataLocalStorageTarefa = localStorage.getItem(\r\n        //       \"dataLocalStorageTarefa\"\r\n        //     );\r\n        //     if (dataLocalStorageTarefa) {\r\n        //       let tarefas = JSON.parse(dataLocalStorageTarefa);\r\n        //       tarefas.forEach((tarefa) => {\r\n        //         console.log(tarefa.atribuidaPara, itemExcluzao);\r\n        //         if (tarefa.atribuidaPara == itemExcluzao) {\r\n        //           registroTarefa = true;\r\n        //         }\r\n        //       });\r\n        //     }\r\n        //     if (!registroTarefa) {\r\n        //       let dataLocalStorageUsuarios = localStorage.getItem(\r\n        //         \"dataLocalStorageUsuario\"\r\n        //       );\r\n        //       let usuarios = JSON.parse(dataLocalStorageUsuarios);\r\n\r\n        //       usuarios.forEach((usuario) => {\r\n        //         if (usuario.id == itemExcluzao) {\r\n        //           let indexGrid = usuarios.indexOf(usuario);\r\n        //           items.value.splice(indexGrid, 1);\r\n        //           let stringfy = JSON.stringify(items.value);\r\n        //           localStorage.setItem(\"dataLocalStorageUsuario\", stringfy);\r\n        //         }\r\n        //       });\r\n        //       Swal.fire({\r\n        //         icon: \"success\",\r\n        //         title: `Concluído`,\r\n        //         text: `O Item \"${descricaoItemSelected}\" foi excluído`,\r\n        //       });\r\n        //       registroTarefa = false;\r\n        //     } else {\r\n        //       Swal.fire({\r\n        //         icon: \"warning\",\r\n        //         title: `Atenção`,\r\n        //         text: `O usuário \"${descricaoItemSelected}\" não pode ser excluído pois ja possui tarefas cadastradas.`,\r\n        //       });\r\n        //     }\r\n        //   }\r\n        // });\r\n      }\r\n    };\r\n\r\n    let usuarios = [];\r\n      servico\r\n        .get(\"usuarios\")\r\n        .then((snapshot) => {\r\n          if (snapshot.exists()) {\r\n            // console.log(snapshot.val());\r\n            let data = snapshot.val();\r\n            // console.table(data);\r\n            for (var [key, value] of Object.entries(data)) {\r\n              // console.log(key, value);\r\n              let obj = {\r\n                id: value.id || key,\r\n                descricao: value.descricao,\r\n                nome: value.nome,\r\n              };\r\n              usuarios.push(obj);\r\n              \r\n            }\r\n            items.value = usuarios;\r\n          } else {\r\n            console.log(\"No data available\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n\r\n    \r\n\r\n    onMounted(async () => {\r\n     \r\n    });\r\n    return {\r\n      items,\r\n      componentePaginacao,\r\n      hColumns,\r\n      onEdit,\r\n      \r\n     \r\n    };\r\n  },\r\n  components: {\r\n    Table,\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Usuarios.vue?vue&type=template&id=adb60528\"\nimport script from \"./Usuarios.vue?vue&type=script&lang=js\"\nexport * from \"./Usuarios.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <table class=\"table\">\r\n    <thead>\r\n      <tr>\r\n        <th scope=\"col\" v-for=\"(item, index) in hColumns\" :key=\"index\">\r\n          <div>\r\n            {{ item.label }}\r\n          </div>\r\n        </th>\r\n        <th v-if=\"lAction\" id=\"tableHeaderActions\">\r\n          <slot name=\"table-header-actions\"></slot>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr scope=\"row\" v-for=\"(rowObj, index) in items\" :key=\"index\">\r\n        <td v-for=\"(rowValue, index) in getColumns(rowObj)\" :key=\"index\">\r\n          {{ rowValue }}\r\n        </td>\r\n        <td\r\n          v-if=\"lAction\"\r\n          :id=\"'tableAction' + index\"\r\n          :data-item=\"rowObj\"\r\n          @click=\"onActionClick($event, rowObj)\"\r\n        >\r\n          <slot name=\"table-actions\"></slot>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nexport default {\r\n  props: [\"headerColumns\", \"items\", \"action\"],\r\n  async setup(props, { emit }) {\r\n    var hColumns = ref(props.headerColumns);\r\n    var lAction = ref(props.action ? props.action : false);\r\n    var lItems = ref(await props.items);\r\n    const getColumns = (obj) => {\r\n      var columnsValues = [];\r\n      for (let index = 0; index < hColumns.value.length; index++) {\r\n        const key = hColumns.value[index].key;\r\n        columnsValues.push(obj[key]);\r\n      }\r\n      return columnsValues;\r\n    };\r\n    const onActionClick = (e, obj) => {\r\n      e.item = obj;\r\n      emit(\"on-action-click\", e);\r\n    };\r\n    return {\r\n      lAction,\r\n      hColumns,\r\n      lItems,\r\n      getColumns,\r\n      onActionClick,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>","import { render } from \"./Table.vue?vue&type=template&id=44246fae\"\nimport script from \"./Table.vue?vue&type=script&lang=js\"\nexport * from \"./Table.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}