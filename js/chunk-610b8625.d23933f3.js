(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-610b8625"],{"0a26":function(e,a,t){"use strict";t.r(a);var c=t("7a23"),l={class:"row mt-5"},i={class:"col-sm-12"},o={class:"card shadow"},n=Object(c["i"])("header",{class:"card-header"},[Object(c["i"])("strong",{class:"align-self-center"}," Crie tarefas ")],-1),r={class:"card-body"},s={class:"row"},u={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-3"},d={class:"row"},b={class:"col-sm-6 col-md-6 col-lg-6 col-xl-6"},v={key:0},j={class:"col-sm-6 col-md-6 col-lg-6 col-xl-6"},m={key:0},O=Object(c["i"])("label",null," Campos com * são de preenchimento obrigatório ",-1),f={class:"row"},g={class:"col-sm-2 col-md-2 col-lg-2 col-xl-2"},p=Object(c["i"])("label",null,"Referência ",-1),h={class:"col-sm-10 col-md-10 col-lg-10 col-xl-10"},x=Object(c["i"])("label",null,"* Atribuída para:",-1),w={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},y=Object(c["i"])("label",null,"* Descrição ",-1),C={class:"col-sm-12 col-md-6 col-lg-6 col-xl-6"},M=Object(c["i"])("label",null,"Deadline",-1),V={class:"col-sm-12 col-md-6 col-lg-6 col-xl-6"},U=Object(c["i"])("label",null," Tarefa concluida? ",-1),k=Object(c["i"])("br",null,null,-1),A={class:"d-flex mt-3 buttonsActions"},D={key:0,class:"btn btn-success",type:"submit"},P=Object(c["i"])("br",null,null,-1),B=Object(c["i"])("br",null,null,-1),R=Object(c["i"])("br",null,null,-1),F={key:0,class:"card shadow mt-3"},J=Object(c["i"])("header",{class:"card-header"},[Object(c["i"])("strong",{class:"align-self-center"}," Chat da taféra")],-1),E={class:"card-body"},S=Object(c["i"])("p",{class:"text-center"},[Object(c["h"])(" mensagens mais recentes "),Object(c["i"])("i",{class:"fas fa-arrow-up"})],-1),G={class:"row"},I={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 chat"},T={class:"row"},q={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},N={key:0,class:"d-flex justify-content-end"},z={class:"container containerChat col-10"},H={class:"d-flex justify-content-end mb-1"},L={class:"time-right mr-3"},Y=Object(c["i"])("i",{class:"fas fa-arrow-up"},null,-1),$={class:"d-flex justify-content-end"},K={class:"time-right"},Q={key:1,class:"container containerChat darker col-10"},W={class:"d-flex justify-content-start mb-1"},X=Object(c["i"])("i",{class:"fas fa-arrow-down mr-3"},null,-1),Z={class:"time-left"},_={class:"time-left"},ee={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},ae={class:"row"},te={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},ce={class:"input-group mb-3"},le={class:"input-group-append"};function ie(e,a,t,ie,oe,ne){var re=Object(c["A"])("Multiselect");return Object(c["s"])(),Object(c["e"])("form",{onSubmit:a[10]||(a[10]=function(){return ie.validarForm&&ie.validarForm.apply(ie,arguments)})},[Object(c["i"])("div",l,[Object(c["i"])("div",i,[Object(c["i"])("div",o,[n,Object(c["i"])("div",r,[Object(c["i"])("div",s,[Object(c["i"])("div",u,[Object(c["i"])("div",d,[Object(c["i"])("div",b,[ie.tarefaId?(Object(c["s"])(),Object(c["e"])("label",v," Data de criação "+Object(c["C"])(ie.ViewModel.dataCriacao),1)):Object(c["f"])("",!0)]),Object(c["i"])("div",j,[ie.tarefaId?(Object(c["s"])(),Object(c["e"])("label",m," Data ultima alteração "+Object(c["C"])(ie.ViewModel.dataUltimaAlteracao),1)):Object(c["f"])("",!0)])]),O,Object(c["i"])("div",f,[Object(c["i"])("div",g,[p,Object(c["J"])(Object(c["i"])("input",{class:"form-control",type:"numbers",placeholder:"Digite um valor","onUpdate:modelValue":a[1]||(a[1]=function(e){return ie.ViewModel.value=e}),readonly:""},null,512),[[c["G"],ie.ViewModel.value]])]),Object(c["i"])("div",h,[x,Object(c["i"])(re,{modelValue:ie.ViewModel.atribuidaPara,"onUpdate:modelValue":a[2]||(a[2]=function(e){return ie.ViewModel.atribuidaPara=e}),placeholder:"Selecione o usuário",options:ie.optionsUsuarios,disabled:ie.inputReadonly,required:!0},null,8,["modelValue","options","disabled"])]),Object(c["i"])("div",w,[y,Object(c["J"])(Object(c["i"])("textarea",{class:"form-control","onUpdate:modelValue":a[3]||(a[3]=function(e){return ie.ViewModel.descricao=e}),readonly:ie.inputReadonly,placeholder:"Digite a decrição",required:""},null,8,["readonly"]),[[c["G"],ie.ViewModel.descricao]])]),Object(c["i"])("div",C,[M,Object(c["J"])(Object(c["i"])("input",{type:"date",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=function(e){return ie.ViewModel.deadline=e}),readonly:ie.inputReadonly,required:""},null,8,["readonly"]),[[c["G"],ie.ViewModel.deadline]])]),Object(c["i"])("div",V,[U,k,Object(c["J"])(Object(c["i"])("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=function(e){return ie.ViewModel.concluida=e}),readonly:ie.inputReadonly},null,8,["readonly"]),[[c["F"],ie.ViewModel.concluida]])])]),Object(c["i"])("div",A,[ie.mostrarBtnSalvar?(Object(c["s"])(),Object(c["e"])("button",D," Salvar ")):Object(c["f"])("",!0),ie.mostrarBtnSalvar?(Object(c["s"])(),Object(c["e"])("input",{key:1,type:"button",class:"btn btn-warning ml-2 mr-2",onClick:a[6]||(a[6]=function(e){return ie.limpaForm()}),value:"Limpar"})):Object(c["f"])("",!0),Object(c["i"])("button",{class:"btn btn-secondary",type:"reset",onClick:a[7]||(a[7]=function(a){return e.$router.push("/tarefas")})}," Voltar ")])]),P,B,R])])]),ie.tarefaId?(Object(c["s"])(),Object(c["e"])("div",F,[J,Object(c["i"])("div",E,[S,Object(c["i"])("div",G,[Object(c["i"])("div",I,[Object(c["i"])("div",T,[Object(c["i"])("div",q,[(Object(c["s"])(!0),Object(c["e"])(c["a"],null,Object(c["y"])(ie.chatMensage,(function(e,a){return Object(c["s"])(),Object(c["e"])("div",{key:a},[1==e.mensagemEnvida?(Object(c["s"])(),Object(c["e"])("div",N,[Object(c["i"])("div",z,[Object(c["i"])("div",H,[Object(c["i"])("span",L,Object(c["C"])(e.user),1),Y]),Object(c["i"])("div",$,[Object(c["i"])("p",null,Object(c["C"])(e.mensagem),1)]),Object(c["i"])("span",K,Object(c["C"])(e.data),1)])])):Object(c["f"])("",!0),0==e.mensagemEnvida?(Object(c["s"])(),Object(c["e"])("div",Q,[Object(c["i"])("div",W,[X,Object(c["i"])("span",Z,Object(c["C"])(e.user),1)]),Object(c["i"])("p",null,Object(c["C"])(e.mensagem),1),Object(c["i"])("span",_,Object(c["C"])(e.data),1)])):Object(c["f"])("",!0)])})),128))])])]),Object(c["i"])("div",ee,[Object(c["i"])("div",ae,[Object(c["i"])("div",te,[Object(c["i"])("div",ce,[Object(c["J"])(Object(c["i"])("textarea",{"onUpdate:modelValue":a[8]||(a[8]=function(e){return ie.mensagemChat=e}),rows:"4",class:"form-control",placeholder:"Digite uma mensagem"},null,512),[[c["G"],ie.mensagemChat]]),Object(c["i"])("div",le,[Object(c["i"])("input",{type:"button",onClick:a[9]||(a[9]=function(){return ie.enviaMensagemChat&&ie.enviaMensagemChat.apply(ie,arguments)}),class:"input-group-text",value:"Enviar"})])])])])])])])])):Object(c["f"])("",!0)])])],32)}var oe=t("1da1"),ne=t("3835"),re=(t("96cf"),t("4fad"),t("a306")),se=t("11c1"),ue=t("3d20"),de=t.n(ue),be=t("6c02"),ve=t("5502"),je=t("4f7a"),me=t("2591"),Oe={components:{Multiselect:re["a"]},setup:function(){var e,a,t=Object(be["d"])(),l=t.params,i=l.tarefaId,o=l.visualizar,n=Object(ve["b"])(),r=function(){return i||n.state.emptyGuid},s=0,u=Object(c["x"])(),d=Object(be["e"])(),b=Object(c["x"])([]);o?(e=!1,a=!0):(e=!0,a=!1);var v=Object(c["x"])({id:Object(c["x"])(r),value:Object(c["x"])(s),atribuidaPara:Object(c["x"])(),lablAtribuidaPara:Object(c["x"])(),descricao:Object(c["x"])(),idBanco:Object(c["x"])(),concluida:Object(c["x"])(!1),deadline:Object(c["x"])(),chat:Object(c["x"])([])}),j=Object(c["x"])(),m=Object(c["x"])(),O=function(){v.value.id=Object(c["x"])(),v.value.value=v.value.value+1,v.value.descricao=Object(c["x"])(),v.value.atribuidaPara=Object(c["x"])(),v.value.concluida=Object(c["x"])(!1),v.value.deadline=Object(c["x"])(),v.value.dataCriacao=Object(c["x"])(),v.value.dataUltimaAlteracao=Object(c["x"])()},f=function(e){e.preventDefault(),v.value.atribuidaPara?g():de.a.fire({icon:"warning",title:"Atenção",text:"Campos com * são de preenchimento obrigatório"})},g=function(){var e=new Date,a=e.getDate(),t=e.getMonth(),c=e.getFullYear(),l=e.getHours(),o=e.getMinutes();if(i){var n={id:v.value.id,value:v.value.value,atribuidaPara:v.value.atribuidaPara,lablAtribuidaPara:p(),descricao:v.value.descricao,concluida:v.value.concluida,dataUltimaAlteracao:a+"/"+t+"/"+c+":"+l+":"+o},r="tarefa/"+v.value.idBanco;je["a"].edit(r,n).then((function(){de.a.fire({icon:"success",title:"Concluído",text:'O item "'.concat(v.value.value,'" foi editado '),showDenyButton:!0,confirmButtonText:"Voltar",showCancelButton:!0}).then((function(e){e.isConfirmed&&d.push("/tarefas")}))})).catch((function(e){console.error(e)}))}else{v.value.id=Object(se["v4"])();var s={id:v.value.id,value:v.value.value,atribuidaPara:v.value.atribuidaPara,lablAtribuidaPara:p(),descricao:v.value.descricao,concluida:v.value.concluida,deadline:v.value.deadline,dataCriacao:a+"/"+t+"/"+c+":"+l+":"+o,dataUltimaAlteracao:a+"/"+t+"/"+c+":"+l+":"+o};console.log("data",s),je["a"].add("tarefa",s).then((function(){de.a.fire({icon:"success",title:"Concluído",text:'O item "'.concat(v.value.value,'" foi adicionado '),showDenyButton:!0,confirmButtonText:"Voltar",denyButtonText:"Adicionar mais taréfas"}).then((function(e){e.isConfirmed?d.push("/tarefas"):e.isDenied&&O()}))})).catch((function(e){console.error(e)}))}},p=function(){for(var e="",a=0,t=Object.entries(u.value);a<t.length;a++){var c=Object(ne["a"])(t[a],2),l=c[0],i=c[1];console.log("#########",l,i),i.id==v.value.atribuidaPara&&(console.log("label is"),e=i.nome)}return e},h=function e(){var a=0,t="tarefa/"+v.value.idBanco,c=[];je["a"].get(t).then((function(t){if(console.log("snapshot",t.val()),t.exists()){var l=t.val(),i="",o=me["a"].auth();o&&(i=o.currentUser.email);for(var n=0,r=Object.entries(l.chat);n<r.length;n++){var s=Object(ne["a"])(r[n],2),u=s[0],d=s[1];console.log(d,u);var b=void 0;b=i==d.user?{mensagem:d.mensagem,user:d.user,mensagemEnvida:!0,data:d.data}:{mensagem:d.mensagem,user:d.user,mensagemEnvida:!1,data:d.data},c.push(b)}c.reverse(),m.value=c,console.log("chats",c)}else a++,a<=2&&setTimeout((function(){e()}),1e3),console.log("No data available")})).catch((function(e){console.error(e)}))},x=function(){if(j.value){var e="",a=me["a"].auth();a&&(e=a.currentUser.email),console.log("mensagemChat",j.value),console.log("userName",e);var t=new Date,c=t.getDate(),l=t.getMonth(),i=t.getFullYear(),o=t.getHours(),n=t.getMinutes(),r={mensagem:j.value,user:e,data:c+"/"+l+"/"+i+" :"+o+":"+n},s="tarefa/"+v.value.idBanco+"/chat";je["a"].add(s,r).then((function(){console.log("atualizar o chat"),h(),j.value=""})).catch((function(e){console.error(e)}))}};return Object(c["q"])(Object(oe["a"])(regeneratorRuntime.mark((function e(){var a,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=function(){je["a"].get("usuarios").then((function(e){if(e.exists()){var a=e.val();console.log("data",a),u.value=a;for(var t=0,c=Object.entries(a);t<c.length;t++){var l=Object(ne["a"])(c[t],2),i=l[0],o=l[1];console.log(i,o);var n={value:o.id,label:o.nome};b.value.push(n)}}}))},a(),t=function(){var e=Object(oe["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("id",a),je["a"].get("tarefa").then((function(e){if(e.exists())for(var t=e.val(),c=0,l=Object.entries(t);c<l.length;c++){var i=Object(ne["a"])(l[c],2),o=i[0],n=i[1];a==n.id&&(v.value.id=n.id,v.value.atribuidaPara=n.atribuidaPara,v.value.descricao=n.descricao,v.value.value=n.value,v.value.idBanco=o,v.value.concluida=n.concluida,v.value.deadline=n.deadline,v.value.dataCriacao=n.dataCriacao,v.value.dataUltimaAlteracao=n.dataUltimaAlteracao,v.value.dataUltimaAlteracao=n.dataUltimaAlteracao)}else console.log("No data available")})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();try{void 0!==i&&(t(i),console.log("obterChat"),h())}catch(c){console.error("Erro ao obter usuario para edição",c)}case 4:case"end":return e.stop()}}),e)})))),{ViewModel:v,optionsUsuarios:b,limpaForm:O,validarForm:f,filtraLabelUsuario:p,mostrarBtnSalvar:e,inputReadonly:a,tarefaId:i,enviaMensagemChat:x,mensagemChat:j,obterChat:h,chatMensage:m}}};t("d742"),t("b2be");Oe.render=ie;a["default"]=Oe},4976:function(e,a,t){},b2be:function(e,a,t){"use strict";t("4976")}}]);
//# sourceMappingURL=chunk-610b8625.d23933f3.js.map